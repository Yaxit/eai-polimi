Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.1.0-RC3)
Created date          : 2022-03-23 19:44:49
Parameters            : generate --name usc_network -m **/AI_Resources/models/usc_4_class.tflite --type tflite --compression 1 --verbosity 1 --workspace **\AppData\Local\Temp\mxAI_workspace78643646625210016403303244347029406 --output **\.stm32cubemx\usc_network_output

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file            : **/AI_Resources/models/usc_4_class.tflite
type                  : tflite
c_name                : usc_network
compression           : None
workspace dir         : **\AppData\Local\Temp\mxAI_workspace78643646625210016403303244347029406
output dir            : **\.stm32cubemx\usc_network_output
model_name            : model
model_hash            : 8db6dd574da4da2e5c5007c7eff0b3ec
input 1/1             : 'input_1'
                        1472 items, 5.75 KiB, ai_float, float, (1,46,32,1), domain:user/
output 1/1            : 'nl_8'
                        4 items, 16 B, ai_float, float, (1,1,1,4), domain:user/
params #              : 41,732 items (163.02 KiB)
macc                  : 565,456
weights (ro)          : 166,928 B (163.02 KiB) (1 segment)
activations (rw)      : 75,972 B (74.19 KiB) (1 segment)
ram (total)           : 81,876 B (79.96 KiB) = 75,972 + 5,888 + 16

Model name - model ['input_1'] ['nl_8']
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)                                                     oshape          param/size       macc      connected to                                       |   c_size          c_macc             c_type     
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    input_1 (Input)                                                  (1,46,32,1)                                                                                   |                                     
     slice_0 (Slice)                                                  (1,46,31,1)                                input_1                                            |                                      slice()[0] 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    conv2d_1 (Conv2D)                                                (1,42,27,16)    416/1,664        453,616   slice_0                                            |                   +18,144(+4.0%)     conv2d()[1]
     nl_1_nl (Nonlinearity)                                           (1,42,27,16)                     18,144    conv2d_1                                           |                   -18,144(-100.0%)  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    sequential_batch_normalization_FusedBatchNormV31 (Placeholder)   (None,1,1,16)   16/64                                                                         |   -64(-100.0%)                      
     eltwise_2 (Eltwise)                                              (1,42,27,16)                     18,144    nl_1_nl                                            |                   -18,144(-100.0%)  
                                                                                                                 sequential_batch_normalization_FusedBatchNormV31   |  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    sequential_batch_normalization_FusedBatchNormV3 (Placeholder)    (None,1,1,16)   16/64                                                                         |   -64(-100.0%)                      
     eltwise_3 (Eltwise)                                              (1,42,27,16)                     18,144    eltwise_2                                          |   +128(+100.0%)   +18,144(+100.0%)   bn()[2]    
                                                                                                                 sequential_batch_normalization_FusedBatchNormV3    |  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    pool_4 (Pool)                                                    (1,8,5,16)                       16,000    eltwise_3                                          |                                      pool()[3]  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    reshape_5 (Reshape)                                              (1,1,1,640)                                pool_4                                             |                                     
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    dense_6 (Dense)                                                  (1,1,1,64)      41,024/164,096   41,024    reshape_5                                          |                                      dense()[4] 
     nl_6_nl (Nonlinearity)                                           (1,1,1,64)                       64        dense_6                                            |                                      nl()[5]    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    dense_7 (Dense)                                                  (1,1,1,4)       260/1,040        260       nl_6_nl                                            |                                      dense()[6] 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
8    nl_8 (Nonlinearity)                                              (1,1,1,4)                        60        dense_7                                            |                                      nl()/o[7]  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=565,456/565,456  weights=166,928/166,928  activations=--/75,972 io=--/5,904



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : model
c-name                : usc_network
c-node #              : 8
c-array #             : 17
activations size      : 75972 (1 segments)
weights size          : 166928 (1 segments)
macc                  : 565456
inputs                : ['input_1_output']
outputs               : ['nl_8_output']

C-Arrays (17)
-------------------------------------------------------------------------------------------------
c_id   name (*_array)     item/size      domain/mem-pool           c-type        fmt     comment
-------------------------------------------------------------------------------------------------
0      input_1_output     1472/5888      user/                     float         float   /input 
1      slice_0_output     1426/5704      activations/**default**   float         float          
2      conv2d_1_output    18144/72576    activations/**default**   float         float          
3      eltwise_3_output   18144/72576    activations/**default**   float         float          
4      pool_4_output      640/2560       activations/**default**   float         float          
5      dense_6_output     64/256         activations/**default**   float         float          
6      nl_6_nl_output     64/256         activations/**default**   float         float          
7      dense_7_output     4/16           activations/**default**   float         float          
8      nl_8_output        4/16           user/                     float         float   /output
9      conv2d_1_weights   400/1600       weights/                  const float   float          
10     conv2d_1_bias      16/64          weights/                  const float   float          
11     eltwise_3_scale    16/64          weights/                  const float   float          
12     eltwise_3_bias     16/64          weights/                  const float   float          
13     dense_6_weights    40960/163840   weights/                  const float   float          
14     dense_6_bias       64/256         weights/                  const float   float          
15     dense_7_weights    256/1024       weights/                  const float   float          
16     dense_7_bias       4/16           weights/                  const float   float          
-------------------------------------------------------------------------------------------------

C-Layers (8)
----------------------------------------------------------------------------------------------------
c_id   name (*_layer)   id   layer_type   macc     rom      tensors               shape (array id) 
----------------------------------------------------------------------------------------------------
0      slice_0          0    slice        0        0        I: input_1_output     (1,46,32,1) (0)  
                                                            O: slice_0_output     (1,46,31,1) (1)  
----------------------------------------------------------------------------------------------------
1      conv2d_1         1    conv2d       471760   1664     I: slice_0_output     (1,46,31,1) (1)  
                                                            W: conv2d_1_weights   (1,16,5,5) (9)   
                                                            W: conv2d_1_bias      (1,1,1,16) (10)  
                                                            O: conv2d_1_output    (1,42,27,16) (2) 
----------------------------------------------------------------------------------------------------
2      eltwise_3        3    bn           36288    128      I: conv2d_1_output    (1,42,27,16) (2) 
                                                            W: eltwise_3_scale    (1,1,1,16) (11)  
                                                            W: eltwise_3_bias     (1,1,1,16) (12)  
                                                            O: eltwise_3_output   (1,42,27,16) (3) 
----------------------------------------------------------------------------------------------------
3      pool_4           4    pool         16000    0        I: eltwise_3_output   (1,42,27,16) (3) 
                                                            O: pool_4_output      (1,8,5,16) (4)   
----------------------------------------------------------------------------------------------------
4      dense_6          6    dense        41024    164096   I: pool_4_output0     (1,1,1,640) (4)  
                                                            W: dense_6_weights    (640,1,1,64) (13)
                                                            W: dense_6_bias       (1,1,1,64) (14)  
                                                            O: dense_6_output     (1,1,1,64) (5)   
----------------------------------------------------------------------------------------------------
5      nl_6_nl          6    nl           64       0        I: dense_6_output     (1,1,1,64) (5)   
                                                            O: nl_6_nl_output     (1,1,1,64) (6)   
----------------------------------------------------------------------------------------------------
6      dense_7          7    dense        260      1040     I: nl_6_nl_output     (1,1,1,64) (6)   
                                                            W: dense_7_weights    (64,1,1,4) (15)  
                                                            W: dense_7_bias       (1,1,1,4) (16)   
                                                            O: dense_7_output     (1,1,1,4) (7)    
----------------------------------------------------------------------------------------------------
7      nl_8             8    nl           60       0        I: dense_7_output     (1,1,1,4) (7)    
                                                            O: nl_8_output        (1,1,1,4) (8)    
----------------------------------------------------------------------------------------------------



Complexity report per layer - macc=565,456 weights=166,928 act=75,972 ram_io=5,904
--------------------------------------------------------------------------
id   name        c_macc                    c_rom                     c_id
--------------------------------------------------------------------------
0    slice_0     |                  0.0%   |                  0.0%   [0] 
1    conv2d_1    ||||||||||||||||  83.4%   |                  1.0%   [1] 
3    eltwise_3   ||                 6.4%   |                  0.1%   [2] 
4    pool_4      |                  2.8%   |                  0.0%   [3] 
6    dense_6     ||                 7.3%   ||||||||||||||||  98.3%   [4] 
6    nl_6_nl     |                  0.0%   |                  0.0%   [5] 
7    dense_7     |                  0.0%   |                  0.6%   [6] 
8    nl_8        |                  0.0%   |                  0.0%   [7] 

Generated files (5)
--------------------------------------------------------------------------------
**\.stm32cubemx\usc_network_output\usc_network_config.h
**\.stm32cubemx\usc_network_output\usc_network.h
**\.stm32cubemx\usc_network_output\usc_network.c
**\.stm32cubemx\usc_network_output\usc_network_data.h
**\.stm32cubemx\usc_network_output\usc_network_data.c
